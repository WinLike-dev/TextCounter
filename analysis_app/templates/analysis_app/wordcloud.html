<!DOCTYPE html>
<html>
<head>
    <title>{{ category }} ì›Œë“œ í´ë¼ìš°ë“œ</title>
    <style>
        .word-list { margin-top: 30px; border-top: 1px solid #ccc; padding-top: 20px; }
        .word-list ul { list-style: none; padding: 0; }
        .word-list li { display: inline-block; margin-right: 15px; background: #f0f0f0; padding: 5px 10px; border-radius: 5px; }

        /* ğŸ’¡ í¼ ìŠ¤íƒ€ì¼ì„ ê°„ë‹¨íˆ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤ (ì„ íƒ ì‚¬í•­) */
        .date-filter-form { background-color: #f4f4f4; border: 1px solid #ddd; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
        .date-filter-form label { margin-right: 10px; font-weight: bold; }
        .date-filter-form input[type="date"] { padding: 5px; border: 1px solid #ccc; border-radius: 4px; }
        .date-filter-form button { padding: 8px 12px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>{{ category }} í•µì‹¬ í‚¤ì›Œë“œ ì›Œë“œ í´ë¼ìš°ë“œ</h1>

    <div class="date-filter-form">
        <h2 style="margin-top: 0;">ğŸ“… ë‚ ì§œ ë²”ìœ„ í•„í„°ë§ ({{ category }} ì¹´í…Œê³ ë¦¬)</h2>
        <form method="GET" action="{% url 'wordcloud_view' category_name=category %}">
            <label for="start_date">ì‹œì‘ ë‚ ì§œ:</label>
            <input type="date" id="start_date" name="start_date" value="{{ current_start_date|date:'Y-m-d' }}">

            <label for="end_date">ì¢…ë£Œ ë‚ ì§œ:</label>
            <input type="date" id="end_date" name="end_date" value="{{ current_end_date|date:'Y-m-d' }}">

            <button type="submit">ì´ ë‚ ì§œë¡œ ë‹¤ì‹œ ì¡°íšŒ</button>
        </form>
    </div>
    <hr>


    {% if image_base64 %}
        <h2>ì›Œë“œ í´ë¼ìš°ë“œ ì´ë¯¸ì§€</h2>

        <img src="{{ image_base64 }}" alt="{{ category }} Word Cloud"
             style="border: 1px solid #ccc; width: 800px; height: auto;">

        <div class="word-list">
            <h2>ìƒìœ„ {{ top_words|length }}ê°œ ë‹¨ì–´ ëª©ë¡</h2>
            <ul>
                {% for word, count in top_words %}
                    <li><strong>{{ word }}</strong> ({{ count }}íšŒ)</li>
                {% endfor %}
            </ul>
        </div>
    {% else %}
        <p>ì›Œë“œ í´ë¼ìš°ë“œë¥¼ ìƒì„±í•  ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>
        <p>(ì„ íƒí•œ ë‚ ì§œ ë²”ìœ„ì— '{{ category }}' ì¹´í…Œê³ ë¦¬ì˜ ë°ì´í„°ê°€ ì—†ëŠ”ì§€ í™•ì¸í•´ ì£¼ì„¸ìš”.)</p>
    {% endif %}

    <p style="margin-top: 30px;"><a href="{% url 'index' %}">ë©”ì¸ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°</a></p>
</body>
</html>